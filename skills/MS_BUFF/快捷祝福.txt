var 队友数量 = 获得表数量(队友);
var 持续时间 = 10800000;
var 锁定名 = 技能名;
var 受术者 = {};
var bsuccess = false;

添加进表(受术者,自己.id);

if(队友数量 > 0) {
  for(i=1;队友数量;1) {
    if(队友[i].距离 < 技能距离) {
      添加进表(受术者,队友[i].id);
    }
  }
}

for(i=1;获得表数量(受术者);1) {
	var locktime = 锁定技能(受术者[i],锁定名,持续时间);
	if(locktime == 0) {
		bsuccess = 使用技能(技能id,技能等级,受术者[i]);
		if(bsuccess) {
			锁定技能(受术者[i],锁定名,持续时间);
		}
	}
}

return bsuccess,false;