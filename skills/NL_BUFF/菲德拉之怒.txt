
// 坐下时不使用技能
if(自己.状态 != 5) {
  return false;
}

var 持续时间 = 1800000;
var 技能目标 = {};

for(i=1;获得表数量(队友);1) {
  if(队友[i].距离 < 技能距离) {
    添加进表(技能目标,队友[i]);
  }
}

添加进表(技能目标,自己);

for(i=1;获得表数量(技能目标);1) {
  if(0 == 锁定技能(技能目标[i].id,技能名,持续时间)) {
    if(使用技能(技能id,技能等级,技能目标[i].id)) {
      return true;
    } else {
      // 如果失败，解锁重新加，直到成功且锁上为止
      锁定技能(技能目标[i].id,技能名,0);
      return true;
    }
  }
}

return false;