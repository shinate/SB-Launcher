
var 失血保护百分比 = 0.70;
var 自身失血保护 = 0.50;
var 魔力保留 = 150;

// 坐下时不使用技能
if(自己.状态 != 5) {
  return false;
}

if(自己.血 / 自己.最大血 < 自身失血保护) {
  return false;
}

if(自己.魔 < 魔力保留) {
  return false;
}

var 技能目标 = {};

for(i=1;获得表数量(队友);1) {
  if(队友[i].距离 < 技能距离) {
    添加进表(技能目标,队友[i]);
  }
}

var 血量 = 1;
var 最低血量 = 1;
var 需要加血的目标 = 0;

for(i=1;获得表数量(技能目标);1) {
  血量 = 技能目标[i].血 / 技能目标[i].最大血;
  if(血量 < 失血保护百分比 && 血量 < 最低血量) {
    需要加血的目标 = 技能目标[i].id;
    最低血量 = 血量;
  }
}

if(需要加血的目标 > 0) {
  return 使用技能(技能id,技能等级,需要加血的目标);
}

return false;